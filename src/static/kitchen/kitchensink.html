<!DOCTYPE html>
<html lang="en" ng-app="kitchensink">
<head>
    <meta charset="utf-8">
    <title>placeholder</title>
    <link rel="stylesheet" href="master.css">
    <link rel="stylesheet" href="prism.css">
    <style>pre {
        margin-left: 15px !important
    }</style>
    <style>.thumb {
        height: 165px;
        border: 1px solid #000;
        margin: 1px 1px 10px 40px;
    }</style>
    <!--[if lt IE 9]>
    <script src="excanvas.js"></script>
    <![endif]-->
    <script src="fabric.js"></script>
    <script src="angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script type='text/javascript'>

    function draw(ev) {
        console.log(ev);
        var ctx = document.getElementById('canvas').getContext('2d'),
            img = new Image(),
            f = document.getElementById("uploadimage").files[0],
            url = window.URL || window.webkitURL,
            src = url.createObjectURL(f);

        img.src = src;
        img.onload = function () {
            ctx.drawImage(img, 0, 0);
            url.revokeObjectURL(src);
        }
    }


    </script>

</head>
<body bgcolor="black">

<script>


    function handleImage(e) {
        var reader = new FileReader();
        reader.onload = function (event) {
            var img = new Image();
            img.onload = function () {
                var imgInstance = new fabric.Image(img, {
                    scaleX: 0.2,
                    scaleY: 0.2
                })
                canvas.add(imgInstance);
            }
            img.src = event.target.result;
        }
        reader.readAsDataURL(e.target.files[0]);
    }
</script>
<script>
    (function () {

        // if (document.location.hostname === 'localhost') {
        //     for (var i = 0, len = links.length; i < len; i++) {
        //         links[i].href = links[i].href.replace('fabricjs.com', 'localhost:4000');
        //     }
        // }
        // else {
            var s = document.createElement('script'), t = document.getElementsByTagName('script')[0];
            s.async = true;
            s.src = 'http://api.flattr.com/js/0.6/load.js?mode=auto';
            t.parentNode.insertBefore(s, t);

            !function (d, s, id) {
                var js, fjs = d.getElementsByTagName(s)[0];
                if (!d.getElementById(id)) {
                    js = d.createElement(s);
                    js.id = id;
                    js.src = "//platform.twitter.com/widgets.js";
                    fjs.parentNode.insertBefore(js, fjs);
                }
            }(document, "script", "twitter-wjs");
        // }
    })();
</script>
<script type='text/javascript'>

    function handleImage(e) {
        var reader = new FileReader();
        reader.onload = function (event) {
            var img = new Image();
            img.onload = function () {
                canvas.width = img.width;
                canvas.height = img.height;
                ctx.drawImage(img, 0, 0);
            }
            img.src = event.target.result;
        }
        reader.readAsDataURL(e.target.files[0]);
    }


</script>
<div id="bd-wrapper" ng-controller="CanvasControls">
    <!--[if IE]>
    <script src="../lib/fonts/Delicious.font.js"></script><![endif]-->
    <script src="bootstrap.js"></script>
    <link rel="stylesheet" href="bootstrap.css">
    <link rel="stylesheet" href="kitchensink.css">
    <link href='http://fonts.googleapis.com/css?family=Plaster' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Engagement' rel='stylesheet' type='text/css'>
    <div style="position:relative;width:400px;height:650px;float:left;" id="canvas-wrapper">
        <div id="canvas-controls">
        </div>
        <output id="list"></output>
        <canvas id="canvas" width="384" height="610"></canvas>

    </div>


    <div id="commands" ng-click="maybeLoadShape($event)">

        <div class="tab-content">

            <div class="tab-pane active" id="simple-shapes">
                <p>Add <strong>shapes</strong> to canvas:<label for="color" style="margin-left:10px">Color: </label>
                    <input type="color" style="width:40px" bind-value-to="fill"></p>

                <button type="button" class="btn rect" ng-click="addRect()">Rectangle</button>
                <button type="button" class="btn circle" ng-click="addCircle()">Circle</button>
                <button type="button" class="btn triangle" ng-click="addTriangle()">Triangle</button>
                <button type="button" class="btn line" ng-click="addLine()">Line</button>
                <button type="button" class="btn polygon" ng-click="addPolygon()">Polygon</button>
                <!--****************ADD IMAGE***************-->
                <br>
                <p style="margin-top: 10px;"><b>Add Image or map:</b>
                    <input type="file" id="imgLoader"></p>

                <b>Controls/Export:</b><br>
                <button class="btn btn-object-action" id="remove-selected" ng-click="removeSelected()">
                    Remove selected object/group
                </button>
                <button id="gradientify" class="btn btn-object-action" ng-click="gradientify()">Gradientify</button>
                <button id="shadowify" class="btn btn-object-action" ng-click="shadowify()">Shadowify</button>
                <br>
                <button id="send-backwards" class="btn btn-object-action" ng-click="sendBackwards()">Send backwards
                </button>
                <button id="send-to-back" class="btn btn-object-action" ng-click="sendToBack()">Send to back
                </button>
                <button id="bring-forward" class="btn btn-object-action" ng-click="bringForward()">Bring forwards
                </button>
                <button id="bring-to-front" class="btn btn-object-action" ng-click="bringToFront()">Bring to front
                </button>


                <!--</div>-->
                <div class="tab-pane" id="object-controls-pane">
                    <div style="margin-top: 10px;" id="global-controls">
                        <p>
                            Export canvas as:
                            <button class="btn btn-success" id="rasterize" ng-click="rasterize()">
                                Image
                            </button>
                            <button class="btn btn-success" id="rasterize-svg" ng-click="rasterizeSVG()">
                                SVG
                            </button>
                            <button class="btn btn-success" id="rasterize-json" ng-click="rasterizeJSON(userid,designid)">
                                JSON
                            </button>
                        </p>

                    </div>

                </div>
                <!--<div id="text-wrapper" style="margin-top: 10px" ng-show="getText()"> ************* use this one if you want it to hide-->
                <div style="float:left">
<!--****************LOOK AT CONTROLLERJS LINE 203************-->
                    <p><b>Field Names:</b>
                        <select id="fieldNames" onChange="$('textarea')[0].value+=('<'+value+'>')">
                            <option value="" class="ng-binding">Select from these fields</option>
                        </select>
                    </p>
                    <p><b>Employee Picture:</b>
                        <button type="button" class="btn rect" ng-click="databasesource()">Placeholder</button>
                    </p>
                    <p><b>Text/Label:</b>
                        <button class="btn" ng-click="addText()">Add text</button>
                    </p>
                    <textarea bind-value-to="text" ></textarea><br>
                    <div id="text-controls-additional">
                        <button type="button" class="btn btn-object-action" ng-click="toggleBold()"
                                ng-class="{'btn-inverse': isBold()}">
                            Bold
                        </button>
                        <button type="button" class="btn btn-object-action" id="text-cmd-italic"
                                ng-click="toggleItalic()" ng-class="{'btn-inverse': isItalic()}">
                            Italic
                        </button><br>
                        <button type="button" class="btn btn-object-action" id="text-cmd-underline"
                                ng-click="toggleUnderline()" ng-class="{'btn-inverse': isUnderline()}">
                            Underline
                        </button>
                        <button type="button" class="btn btn-object-action" id="text-cmd-linethrough"
                                ng-click="toggleLinethrough()" ng-class="{'btn-inverse': isLinethrough()}">
                            Linethrough
                        </button>
                        <button type="button" class="btn btn-object-action" id="text-cmd-overline"
                                ng-click="toggleOverline()" ng-class="{'btn-inverse': isOverline()}">
                            Overline
                        </button>
                    </div>
                </div>
                <div id="text-wrapper" style="margin-top: 5px; margin-left:10px; position:relative;float:right">
                    <div style="margin-left: 0px;" id="text-controls">
                        <label for="font-family" style="display:inline-block">Font family:</label>
                        <select id="font-family" class="btn-object-action" bind-value-to="fontFamily">
                            <option value="arial">Arial</option>
                            <option value="helvetica" selected>Helvetica</option>
                            <option value="myriad pro">Myriad Pro</option>
                            <option value="delicious">Delicious</option>
                            <option value="verdana">Verdana</option>
                            <option value="georgia">Georgia</option>
                            <option value="courier">Courier</option>
                            <option value="comic sans ms">Comic Sans MS</option>
                            <option value="impact">Impact</option>
                            <option value="monaco">Monaco</option>
                            <option value="optima">Optima</option>
                            <option value="hoefler text">Hoefler Text</option>
                            <option value="plaster">Plaster</option>
                            <option value="engagement">Engagement</option>
                        </select>
                        <br>
                        <label for="text-align" style="display:inline-block">Text align:</label>
                        <select id="text-align" class="btn-object-action" bind-value-to="textAlign">
                            <option>Left</option>
                            <option>Center</option>
                            <option>Right</option>
                            <option>Justify</option>
                        </select>
                        <div>
                            <label for="text-bg-color">Background color:</label>
                            <input type="color" value="" id="text-bg-color" size="10" class="btn-object-action"
                                   bind-value-to="bgColor">
                        </div>
                        <div>
                            <label for="text-lines-bg-color">Background text color:</label>
                            <input type="color" value="" id="text-lines-bg-color" size="10"
                                   class="btn-object-action"
                                   bind-value-to="textBgColor">
                        </div>
                        <div>
                            <label for="text-stroke-color">Stroke color:</label>
                            <input type="color" value="" id="text-stroke-color" class="btn-object-action"
                                   bind-value-to="strokeColor">
                        </div>
                        <div>
                            <label for="text-font-size">Stroke Width:</label>
                            <input type="range" value="" min="0" max="100" step="5" id="text-stroke-width"
                                   class="btn-object-action" bind-value-to="fontSize">
                        </div>
                        <div>
                            <label for="text-font-size">Font size:</label>
                            <input type="range" value="" min="1" max="120" step="1" id="text-font-size"
                                   class="btn-object-action" bind-value-to="fontSize">
                        </div>
                        <div>
                            <label for="text-line-height">Line height:</label>
                            <input type="range" value="" min="0" max="10" step="0.1" id="text-line-height"
                                   class="btn-object-action" bind-value-to="lineHeight">
                        </div>
                    </div>
                    <!--**************************** right side of text edit part-->

                </div>


            </div>
        </div>

    </div>
</div>
</div>

<script>
    var kitchensink = {};
    var canvas = new fabric.Canvas('canvas');
</script>
<script src="utils.js"></script>
<script src="app_config.js"></script>
<script src="controller.js"></script>
</div>
<script>
    (function () {
        var mainScriptEl = document.getElementById('main');
        if (!mainScriptEl) return;
        var preEl = document.createElement('pre');
        var codeEl = document.createElement('code');
        codeEl.innerHTML = mainScriptEl.innerHTML;
        codeEl.className = 'language-javascript';
        preEl.appendChild(codeEl);
        document.getElementById('bd-wrapper').appendChild(preEl);
    })();
</script>
<script>
    (function () {
        fabric.util.addListener(fabric.window, 'load', function () {
            var canvas = this.__canvas || this.canvas,
                canvases = this.__canvases || this.canvases;

            canvas && canvas.calcOffset && canvas.calcOffset();

            if (canvases && canvases.length) {
                for (var i = 0, len = canvases.length; i < len; i++) {
                    canvases[i].calcOffset();
                }
            }
        });
    })();
</script>
<script>
    document.getElementById('imgLoader').onchange = function handleImage(e) {
        var reader = new FileReader();
        reader.onload = function (event) {
            console.log('fdsf');
            var imgObj = new Image();
            imgObj.src = event.target.result;
            imgObj.onload = function () {
                // start fabricJS stuff

                var image = new fabric.Image(imgObj);
                image.set({
                    left: 250,
                    top: 250,
                    angle: 20,
                    padding: 10,
                    cornersize: 10
                });
                //image.scale(getRandomNum(0.1, 0.25)).setCoords();
                canvas.add(image);

                // end fabricJS stuff
            }

        }
        reader.readAsDataURL(e.target.files[0]);
    };
    function GetURLParameter(sParam) {
        var sPageURL = window.location.search.substring(1);
        var sURLVariables = sPageURL.split('&');
        for (var i = 0; i < sURLVariables.length; i++) {
            var sParameterName = sURLVariables[i].split('=');
            if (sParameterName[0] == sParam) {
                console.log(sParameterName[1]);
                return sParameterName[1];
            }
        }
    }
    $("document").ready(function () {
        console.log("doc ready");
        var columns = GetURLParameter('columns');
        var design = '{"objects":[{"type":"rect","originX":"left","originY":"top","left":-1,"top":-1,"width":100,"height":100,"fill":"#00ade6","stroke":null,"strokeWidth":1,"strokeDashArray":null,"strokeLineCap":"butt","strokeLineJoin":"miter","strokeMiterLimit":10,"scaleX":3.96,"scaleY":1.12,"angle":0,"flipX":false,"flipY":false,"opacity":1,"shadow":null,"visible":true,"clipTo":null,"backgroundColor":"","rx":0,"ry":0,"x":0,"y":0},{"type":"image","originX":"left","originY":"top","left":6.82,"top":52.48,"width":1215,"height":506,"fill":{"type":"linear","coords":{"x1":0,"y1":0,"x2":0,"y2":0},"gradientUnits":"objectBoundingBox","colorStops":[{"offset":"0","color":"rgb(0,173,230)","opacity":1},{"offset":"1","color":"rgb(0,173,230)","opacity":1}]},"stroke":null,"strokeWidth":1,"strokeDashArray":null,"strokeLineCap":"butt","strokeLineJoin":"miter","strokeMiterLimit":10,"scaleX":0.06,"scaleY":0.06,"angle":325.31,"flipX":false,"flipY":false,"opacity":1,"shadow":null,"visible":true,"clipTo":null,"backgroundColor":"","src":"data:image/png;base64,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","filters":[],"crossOrigin":""},{"type":"text","originX":"center","originY":"top","left":188.41,"top":20,"width":248.93,"height":104,"fill":"#00000ade6","stroke":null,"strokeWidth":1,"strokeDashArray":null,"strokeLineCap":"butt","strokeLineJoin":"miter","strokeMiterLimit":10,"scaleX":0.69,"scaleY":0.69,"angle":0,"flipX":false,"flipY":false,"opacity":1,"shadow":null,"visible":true,"clipTo":null,"backgroundColor":"","text":"Digital Crafts\nBadgeSoft","fontSize":40,"fontWeight":"bold","fontFamily":"helvetica","fontStyle":"","lineHeight":1.3,"textDecoration":"","textAlign":"center","path":null,"textBackgroundColor":"","useNative":true},{"type":"image","originX":"left","originY":"top","left":95,"top":165,"width":194,"height":259,"fill":"rgb(0,0,0)","stroke":null,"strokeWidth":1,"strokeDashArray":null,"strokeLineCap":"butt","strokeLineJoin":"miter","strokeMiterLimit":10,"scaleX":1,"scaleY":1,"angle":0,"flipX":false,"flipY":false,"opacity":1,"shadow":null,"visible":true,"clipTo":null,"backgroundColor":"","src":"http://localhost:3000/kitchen/placeholder.jpeg?database$*Headshot","filters":[],"crossOrigin":""},{"type":"text","originX":"center","originY":"top","left":192,"top":450,"width":431.35,"height":104,"fill":"#00000ade6","stroke":null,"strokeWidth":1,"strokeDashArray":null,"strokeLineCap":"butt","strokeLineJoin":"miter","strokeMiterLimit":10,"scaleX":0.5,"scaleY":0.5,"angle":0,"flipX":false,"flipY":false,"opacity":1,"shadow":null,"visible":true,"clipTo":null,"backgroundColor":"","text":"Superstar Programmer:\n<firstname> <lastname>","fontSize":40,"fontWeight":"","fontFamily":"helvetica","fontStyle":"","lineHeight":1.3,"textDecoration":"","textAlign":"left","path":null,"textBackgroundColor":"","useNative":true},{"type":"text","originX":"center","originY":"top","left":186,"top":525,"width":491.39,"height":52,"fill":"#00000ade6","stroke":null,"strokeWidth":1,"strokeDashArray":null,"strokeLineCap":"butt","strokeLineJoin":"miter","strokeMiterLimit":10,"scaleX":0.5,"scaleY":0.5,"angle":0,"flipX":false,"flipY":false,"opacity":1,"shadow":null,"visible":true,"clipTo":null,"backgroundColor":"","text":"Rep ID <employeenumber>","fontSize":40,"fontWeight":"","fontFamily":"helvetica","fontStyle":"","lineHeight":1.3,"textDecoration":"","textAlign":"left","path":null,"textBackgroundColor":"","useNative":true}],"background":""}';
        // var design = GetURLParameter('design');
        designid = GetURLParameter('designid');
        console.log("design and user ids");
        console.log(designid);
        userid = GetURLParameter('userid');
        console.log(userid);
        // console.log("in kitchen, this is a list of columns");
        // console.log(columns);
        var designobj = eval("(" + decodeURI(design) + ')');
        console.log(designobj);
        var columnsobj = eval("(" + decodeURI(columns) + ')');
        console.log("in kitchen, this is the column array");
        console.log(columnsobj);
        for (i = 0; i < columnsobj.length; i++) {
            // console.log(columnsobj[i]);
            $('#fieldNames').append('<option value="' + columnsobj[i] + '">' + columnsobj[i] + '</option>');
        }

        if (designobj) {
            console.log("Going to load user design")
            canvas.loadFromJSON(designobj);
        }
   //     var links = document.getElementById('header').getElementsByTagName('a');
   //     var imageLoader = document.getElementById('imageLoader');
   //     imageLoader.addEventListener('change', handleImage, false);
   //     canvas.add(imageLoader);
   //     document.getElementById("uploadimage").addEventListener("change", draw, false)
   //     $('#state').change(function () {
   //     var columns = $.url().param('columns');
   //     columns = $('#kitchensinkiframe')[0].columns.split(',');
   //
   });


// (function() {
//           var frameBaseSRC = document.getElementById("kitchensinkiframe").src;
//           var frameQueryString = document.location.href.split("columns=")[1];
//           if (frameQueryString != undefined) {
//           document.getElementById("kitchensinkiframe").src = frameBaseSRC + "?columns=" + frameQueryString;
//         }
//         })();

</script>

</body>
</html>
